# Internacionalização (i18n) - Breakout Calendar

Este documento descreve como funciona o sistema de internacionalização do Breakout Calendar e como contribuir com traduções.

## 🌍 Idiomas Suportados

- **Português (pt)** - Idioma padrão 🇧🇷
- **Inglês (en)** - English 🇺🇸  
- **Espanhol (es)** - Español 🇪🇸

## 📁 Estrutura

O sistema de i18n está implementado em:
- `js/i18n.js` - Sistema principal de tradução (classe `I18nManager`)
- `translations/pt.json` - Traduções em Português (Brasil)
- `translations/en.json` - Traduções em Inglês
- `translations/es.json` - Traduções em Espanhol
- Traduções embutidas como fallback no código
- Persistência de preferência no localStorage

## 🔧 Como Funciona

### 1. Carregamento Automático

O sistema carrega automaticamente:
1. Arquivos JSON de tradução via fetch assíncrono
2. Idioma salvo no localStorage (se existir)
3. Português como padrão (caso contrário)
4. Fallback para traduções incorporadas se arquivos JSON falharem

### 2. Seletor de Idioma

Botões no cabeçalho permitem alternar entre os idiomas:
```html
<div class="language-selector">
    <button onclick="changeLanguage('pt')">PT</button>
    <button onclick="changeLanguage('en')">EN</button>
    <button onclick="changeLanguage('es')">ES</button>
</div>
```

### 3. Marcação HTML

Elementos com o atributo `data-i18n` são traduzidos automaticamente:
```html
<span data-i18n="score">Pontos</span>
<button data-i18n="start">Começar</button>
```

### 4. Tradução Dinâmica

Para textos gerados dinamicamente em JavaScript:
```javascript
const text = getText('gameOver'); // Retorna tradução atual
```

## 📝 Estrutura das Traduções

### Arquivos de Tradução JSON

**translations/pt.json:**
```json
{
  "title": "Breakout Calendar",
  "score": "Pontos",
  "lives": "Vidas",
  "welcome": "Boas vindas ao Breakout Calendar!",
  // ... mais traduções
}
```

**translations/en.json:**
```json
{
  "title": "Breakout Calendar", 
  "score": "Score",
  "lives": "Lives",
  "welcome": "Welcome to Breakout Calendar!",
  // ... mais traduções
}
```

**translations/es.json:**
```json
{
  "title": "Breakout Calendar",
  "score": "Puntos", 
  "lives": "Vidas",
  "welcome": "¡Bienvenido a Breakout Calendar!",
  // ... mais traduções
}
```

### Categorias de Tradução

#### Interface Principal
- `title` - Título da página
- `gameTitle` - Título do jogo
- `player` - Jogador
- `score` - Pontuação
- `lives` - Vidas

#### Controles do Jogo
- `start` - Começar/Iniciar
- `pause` - Pausar
- `resume` - Retomar
- `restart` - Reiniciar
- `playAgain` - Jogar Novamente

#### Mensagens
- `welcome` - Mensagem de boas-vindas
- `instructions` - Instruções do jogo
- `gameOver` - Fim de jogo
- `congratulations` - Parabéns (vitória)

#### Legendas dos Blocos
- `legend` - Legenda
- `lightAppointment` - Compromisso Leve
- `mediumAppointment` - Compromisso Médio
- `meetingAppointment` - Reunião
- `allHandsAppointment` - All Hands

#### Dias da Semana
- `monday` - Segunda-feira
- `tuesday` - Terça-feira  
- `wednesday` - Quarta-feira
- `thursday` - Quinta-feira
- `friday` - Sexta-feira
- `saturday` - Sábado
- `sunday` - Domingo

#### Sistema de Recordes
- `records` - Recordes
- `finalScore` - Pontuação Final
- `blocksDestroyed` - Blocos Destruídos
- `newRecord` - Novo Recorde

#### Links e Navegação
- `sourceCode` - Código Fonte
- `sponsor` - Apoiar

## 🚀 Funções Principais

### `changeLanguage(lang)`
Altera o idioma atual e atualiza a interface:
```javascript
changeLanguage('en'); // Muda para inglês
```

### `getText(key)`
Retorna a tradução para uma chave específica:
```javascript
const scoreLabel = getText('score'); // "Score" em inglês
```

### `initializeI18n()`
Inicializa o sistema de tradução (assíncrono):
```javascript
await initializeI18n(); // Carrega traduções e configura idioma
```

### `i18nManager.loadTranslations()`
Carrega arquivos JSON de tradução:
```javascript
await i18nManager.loadTranslations(); // Fetch dos arquivos JSON
```

### `i18nManager.updateTexts()`
Atualiza todos os elementos com `data-i18n`:
```javascript
i18nManager.updateTexts(); // Aplica traduções atuais
```

### `i18nManager.updateDocumentLanguage()`
Define o atributo `lang` do documento HTML:
```javascript
i18nManager.updateDocumentLanguage(); // Ex: <html lang="pt-BR">
```

## 🎯 Adicionando Novas Traduções

### 1. Adicionando Nova Chave

1. Adicione a chave em todos os arquivos JSON:

**translations/pt.json:**
```json
{
  "newKey": "Novo Texto em Português",
  // ... outras traduções
}
```

**translations/en.json:**
```json
{
  "newKey": "New Text in English",
  // ... outras traduções
}
```

**translations/es.json:**
```json
{
  "newKey": "Nuevo Texto en Español",
  // ... outras traduções
}
```

2. Adicione também no fallback incorporado em `js/i18n.js`

3. Use no HTML:
```html
<span data-i18n="newKey">Texto padrão</span>
```

4. Ou use no JavaScript:
```javascript
const text = getText('newKey');
```

### 2. Adicionando Novo Idioma

1. Crie um novo arquivo JSON para o idioma:

**translations/fr.json:**
```json
{
  "title": "Breakout Calendar",
  "score": "Score",
  // ... todas as chaves traduzidas
}
```

2. Adicione o idioma aos arrays em `js/i18n.js`:
```javascript
this.supportedLanguages = ['pt', 'en', 'es', 'fr'];
```

3. Adicione também ao fallback incorporado no código

4. Adicione o botão no HTML:
```html
<button onclick="changeLanguage('fr')">FR</button>
```

5. Atualize o mapeamento de idiomas se necessário:
```javascript
const languageMap = {
    'pt': 'pt-BR',
    'en': 'en-US',
    'es': 'es-ES',
    'fr': 'fr-FR' // novo idioma
};
```

## ✅ Lista de Verificação para Tradução

Ao adicionar um novo idioma, certifique-se de traduzir:

- [ ] Título e metadados da página
- [ ] Interface principal (pontuação, vidas, jogador)
- [ ] Botões e controles
- [ ] Mensagens do jogo (início, fim, pausa)
- [ ] Legendas dos tipos de bloco
- [ ] Dias da semana (abreviados)
- [ ] Sistema de recordes
- [ ] Links do rodapé
- [ ] Mensagens de confirmação/alerta
- [ ] Instruções e ajuda

## 🧪 Testando Traduções

### Teste Manual
1. Mude o idioma usando os botões
2. Verifique se todos os textos foram traduzidos
3. Confirme que a preferência é persistida (recarregue a página)
4. Teste em diferentes tamanhos de tela

### Teste Automatizado
```bash
# Executar testes de i18n
npx jest i18n.test.js
```

### Verificação de Consistência
```javascript
// Verificar se todas as chaves existem em todos os idiomas
Object.keys(translations).forEach(lang => {
    const keys = Object.keys(translations[lang]);
    console.log(`${lang}: ${keys.length} chaves`);
});
```

## 🌐 Considerações Regionais

### Formatação de Textos
- **Português**: "1°", "Pontos:", "Blocos Destruídos:"
- **Inglês**: "1st", "Score:", "Blocks Destroyed:"  
- **Espanhol**: "1°", "Puntos:", "Bloques Destruidos:"

### Abreviações dos Dias
- **Português**: SEG, TER, QUA, QUI, SEX, SAB, DOM
- **Inglês**: MON, TUE, WED, THU, FRI, SAT, SUN
- **Espanhol**: LUN, MAR, MIÉ, JUE, VIE, SÁB, DOM

### Mensagens de Sistema
Mantenha consistência no tom:
- **Formal**: Inglês
- **Semiformal**: Português, Espanhol

## 🤝 Contribuindo com Traduções

### Para Melhorar Traduções Existentes
1. Identifique o texto a ser melhorado
2. Localize a chave correspondente no arquivo JSON adequado (`translations/pt.json`, etc.)
3. Altere a tradução mantendo o contexto
4. Atualize também o fallback em `js/i18n.js` se necessário
5. Teste a alteração

### Para Adicionar Novo Idioma
1. Crie um novo arquivo JSON na pasta `translations/`
2. Copie todas as chaves de um idioma existente
3. Traduza cada valor mantendo formatação similar
4. Adicione o idioma ao sistema em `js/i18n.js`
5. Teste thoroughly o novo idioma
6. Considere aspectos culturais específicos

### Diretrizes de Tradução
- Mantenha textos curtos para botões
- Preserve formatação de números e símbolos
- Adapte saudações e expressões culturalmente
- Teste em dispositivos móveis (espaço limitado)

---

Precisa de ajuda com traduções? [Abra uma issue](https://github.com/dwildt/breakoutcalendar/issues) no GitHub!